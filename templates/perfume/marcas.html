<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALABAZTRUM - Perfumes de Navidad</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>

<body class="bg-white home-page">
    {% include 'partials/navbar.html' %}

    <!-- Área principal con imagen -->
    <main class="w-full home-main bg-white">

        <!-- Sección de Marcas Destacadas -->
        <section class="py-20 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12 fade-in">
                    <h2 class="text-4xl md:text-5xl font-light text-gray-900 mb-4 elegant-title">
                        Marcas Destacadas
                    </h2>
                    <p class="text-sm md:text-base text-gray-500 font-light italic max-w-md mx-auto">
                        Las mejores marcas de perfumería en un solo lugar
                    </p>
                </div>

                <div id="featured-brands"
                    class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 max-w-6xl mx-auto">
                    <div class="col-span-full text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"></div>
                        <p class="text-gray-600 mt-4">Cargando marcas...</p>
                    </div>
                </div>
            </div>
        </section>



        {% include 'partials/footer.html' %}

        <!-- Botón flotante de WhatsApp -->
        <a href="https://wa.me/9191936256" target="_blank" rel="noopener" class="whatsapp-float"
            aria-label="Contactar por WhatsApp">
            <i class="fab fa-whatsapp"></i>
        </a>

        <!-- Scripts Firebase y autenticación -->
        <script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
        <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
        <script src="{{ url_for('static', filename='js/auth-manager.js') }}"></script>
        <script src="{{ url_for('static', filename='js/navbar-auth.js') }}"></script>
        <script src="{{ url_for('static', filename='js/navbar-persistent.js') }}"></script>

        <script>
            async function loadBrandsFromBrands() {
                const container = document.getElementById('featured-brands');
                if (!container) return;

                try {
                    if (typeof db === 'undefined') {
                        setTimeout(loadBrandsFromBrands, 500);
                        return;
                    }

                    const snapshot = await db.collection('brands').get();

                    if (snapshot.empty) {
                        container.innerHTML = `
                <div class="col-span-full text-center py-12 text-gray-500">
                    No hay marcas disponibles
                </div>
            `;
                        return;
                    }

                    container.innerHTML = '';

                    snapshot.forEach(doc => {
                        const data = doc.data();

                        if (!data.name || !data.imageUrl) return;

                        container.innerHTML += `
                <a href="/fragancias?marca=${encodeURIComponent(data.name)}"
                   class="flex items-center justify-center bg-white rounded-full shadow-sm
                          hover:shadow-md transition transform hover:scale-110
                          border border-gray-100 aspect-square p-6"
                   title="${data.name}">
                   
                    <img src="${data.imageUrl}"
                         alt="${data.name}"
                         class="object-contain w-full h-full"
                         loading="lazy"
                         onerror="this.style.display='none'">
                </a>
            `;
                    });

                } catch (error) {
                    console.error('Error cargando marcas:', error);
                    container.innerHTML = `
            <div class="col-span-full text-center py-12 text-red-500">
                Error al cargar marcas
            </div>
        `;
                }
            }

            document.addEventListener('DOMContentLoaded', loadBrandsFromBrands);
        </script>


</body>

</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - ALABAZTRUM</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body class="bg-gray-50">
    {% include 'partials/navbar.html' %}

    <main class="min-h-screen py-8">
        <div class="container mx-auto px-4 max-w-6xl">
            <!-- Título -->
            <h1 class="text-3xl font-bold text-gray-900 mb-8">Finalizar Pedido</h1>

            <!-- Stepper (Indicador de pasos) -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <div class="flex items-center justify-between">
                    <!-- Paso 1: Dirección -->
                    <div class="flex items-center flex-1">
                        <div id="step-1-indicator" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-900 text-white font-semibold mr-3">
                            <i class="fas fa-check"></i>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Paso 1</p>
                            <p class="text-xs text-gray-500">Dirección de Envío</p>
                        </div>
                    </div>
                    
                    <!-- Línea conectora -->
                    <div class="flex-1 h-0.5 bg-gray-300 mx-4"></div>
                    
                    <!-- Paso 2: Pago -->
                    <div class="flex items-center flex-1">
                        <div id="step-2-indicator" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-gray-600 font-semibold mr-3">
                            <span>2</span>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Paso 2</p>
                            <p class="text-xs text-gray-400">Pago</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Columna principal (formularios) -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Paso 1: Dirección de Envío -->
                    <div id="step-1-content" class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-semibold text-gray-900 mb-6">Dirección de Envío</h2>
                        
                        <form id="address-form" class="space-y-4">
                            <!-- Nombre completo -->
                            <div>
                                <label for="full-name" class="block text-sm font-medium text-gray-700 mb-2">
                                    Nombre Completo <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="full-name" 
                                    name="fullName"
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                    placeholder="Juan Pérez"
                                >
                            </div>

                            <!-- Teléfono -->
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                                    Teléfono <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="tel" 
                                    id="phone" 
                                    name="phone"
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                    placeholder="1234567890"
                                >
                            </div>

                            <!-- Calle y número -->
                            <div>
                                <label for="street" class="block text-sm font-medium text-gray-700 mb-2">
                                    Calle y Número <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="street" 
                                    name="street"
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                    placeholder="Calle Principal #123"
                                >
                            </div>

                            <!-- Colonia -->
                            <div>
                                <label for="colonia" class="block text-sm font-medium text-gray-700 mb-2">
                                    Colonia <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="colonia" 
                                    name="colonia"
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                    placeholder="Centro"
                                >
                            </div>

                            <!-- Ciudad y Estado -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="city" class="block text-sm font-medium text-gray-700 mb-2">
                                        Ciudad <span class="text-red-500">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="city" 
                                        name="city"
                                        required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                        placeholder="Ciudad de México"
                                    >
                                </div>
                                <div>
                                    <label for="state" class="block text-sm font-medium text-gray-700 mb-2">
                                        Estado <span class="text-red-500">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="state" 
                                        name="state"
                                        required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                        placeholder="CDMX"
                                    >
                                </div>
                            </div>

                            <!-- Código Postal -->
                            <div>
                                <label for="postal-code" class="block text-sm font-medium text-gray-700 mb-2">
                                    Código Postal <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="postal-code" 
                                    name="postalCode"
                                    required
                                    pattern="[0-9]{5}"
                                    maxlength="5"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition"
                                    placeholder="12345"
                                >
                            </div>

                            <!-- Referencias -->
                            <div>
                                <label for="references" class="block text-sm font-medium text-gray-700 mb-2">
                                    Referencias (opcional)
                                </label>
                                <textarea 
                                    id="references" 
                                    name="references"
                                    rows="3"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition resize-none"
                                    placeholder="Ej: Casa blanca, portón negro, entre calles X y Y"
                                ></textarea>
                            </div>

                            <!-- Botón continuar -->
                            <div class="pt-4">
                                <button 
                                    type="submit" 
                                    class="w-full bg-gray-900 hover:bg-gray-800 text-white font-semibold py-4 px-6 rounded-lg transition"
                                >
                                    Continuar al Pago
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Paso 2: Método de Pago -->
                    <div id="step-2-content" class="hidden bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-semibold text-gray-900 mb-6">Método de Pago</h2>
                        
                        <form id="payment-form" class="space-y-6">
                            <!-- Métodos de pago -->
                            <div class="space-y-3">
                                <label class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-gray-900 transition payment-method">
                                    <input 
                                        type="radio" 
                                        name="paymentMethod" 
                                        value="cash" 
                                        checked
                                        class="mr-4 w-4 h-4 text-gray-900 focus:ring-gray-900"
                                    >
                                    <div class="flex-1">
                                        <div class="flex items-center">
                                            <i class="fas fa-money-bill-wave text-2xl text-green-600 mr-3"></i>
                                            <div>
                                                <p class="font-semibold text-gray-900">Pago en Efectivo</p>
                                                <p class="text-sm text-gray-500">Paga cuando recibas tu pedido</p>
                                            </div>
                                        </div>
                                    </div>
                                </label>

                                <label class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-gray-900 transition payment-method">
                                    <input 
                                        type="radio" 
                                        name="paymentMethod" 
                                        value="transfer" 
                                        class="mr-4 w-4 h-4 text-gray-900 focus:ring-gray-900"
                                    >
                                    <div class="flex-1">
                                        <div class="flex items-center">
                                            <i class="fas fa-university text-2xl text-blue-600 mr-3"></i>
                                            <div>
                                                <p class="font-semibold text-gray-900">Transferencia Bancaria</p>
                                                <p class="text-sm text-gray-500">Transferencia directa a nuestra cuenta</p>
                                            </div>
                                        </div>
                                    </div>
                                </label>

                                <label class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-gray-900 transition payment-method">
                                    <input 
                                        type="radio" 
                                        name="paymentMethod" 
                                        value="card" 
                                        class="mr-4 w-4 h-4 text-gray-900 focus:ring-gray-900"
                                    >
                                    <div class="flex-1">
                                        <div class="flex items-center">
                                            <i class="fas fa-credit-card text-2xl text-purple-600 mr-3"></i>
                                            <div>
                                                <p class="font-semibold text-gray-900">Tarjeta de Crédito/Débito</p>
                                                <p class="text-sm text-gray-500">Pago seguro con tarjeta</p>
                                            </div>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <!-- Información de pago (mostrar según método seleccionado) -->
                            <div id="payment-info" class="hidden p-4 bg-gray-50 rounded-lg">
                                <div id="cash-info" class="hidden">
                                    <p class="text-sm text-gray-600 mb-2">
                                        <i class="fas fa-info-circle mr-2"></i>
                                        El repartidor recibirá el pago en efectivo al momento de la entrega.
                                    </p>
                                </div>
                                
                                <div id="transfer-info" class="hidden">
                                    <p class="text-sm font-medium text-gray-900 mb-2">Datos para transferencia:</p>
                                    <div class="bg-white p-3 rounded border border-gray-200">
                                        <p class="text-sm text-gray-700"><span class="font-medium">Banco:</span> BBVA</p>
                                        <p class="text-sm text-gray-700"><span class="font-medium">CLABE:</span> 012345678901234567</p>
                                        <p class="text-sm text-gray-700"><span class="font-medium">Cuenta:</span> 1234567890</p>
                                        <p class="text-sm text-gray-700"><span class="font-medium">Beneficiario:</span> ALABAZTRUM</p>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-2">
                                        <i class="fas fa-exclamation-triangle mr-1"></i>
                                        Envía el comprobante de transferencia a nuestro WhatsApp después de realizar el pago.
                                    </p>
                                </div>
                                
                                <div id="card-info" class="hidden">
                                    <p class="text-sm text-gray-600 mb-4">
                                        <i class="fas fa-info-circle mr-2"></i>
                                        El procesamiento de pago con tarjeta se realizará de forma segura.
                                    </p>
                                    <!-- Aquí se podría integrar un procesador de pagos como Stripe -->
                                </div>
                            </div>

                            <!-- Botones -->
                            <div class="flex gap-4 pt-4">
                                <button 
                                    type="button" 
                                    id="back-to-address-btn"
                                    class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-lg transition"
                                >
                                    <i class="fas fa-arrow-left mr-2"></i>
                                    Volver
                                </button>
                                <button 
                                    type="submit" 
                                    id="complete-order-btn"
                                    class="flex-1 bg-gray-900 hover:bg-gray-800 text-white font-semibold py-4 px-6 rounded-lg transition"
                                >
                                    Completar Pedido
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Columna lateral (Resumen) -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-lg shadow-md p-6 sticky top-4">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Resumen del Pedido</h2>
                        
                        <!-- Productos -->
                        <div id="order-items" class="space-y-3 mb-6">
                            <!-- Los productos se cargarán aquí -->
                        </div>

                        <div class="border-t border-gray-200 pt-4 space-y-3">
                            <div class="flex justify-between text-gray-600">
                                <span>Subtotal</span>
                                <span id="order-subtotal">$0.00</span>
                            </div>
                            <div class="flex justify-between text-gray-600">
                                <span>Envío</span>
                                <span class="text-green-600">Gratis</span>
                            </div>
                            <div class="border-t border-gray-200 pt-3 flex justify-between text-lg font-semibold text-gray-900">
                                <span>Total</span>
                                <span id="order-total">$0.00</span>
                            </div>
                        </div>

                        <!-- Información de entrega -->
                        <div id="delivery-info" class="hidden mt-6 p-4 bg-gray-50 rounded-lg">
                            <h3 class="font-semibold text-gray-900 mb-2">Dirección de Envío</h3>
                            <div id="delivery-address-text" class="text-sm text-gray-600">
                                <!-- Se llenará con la dirección -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts Firebase y autenticación -->
    <script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/navbar-auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/navbar-persistent.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cart.js') }}"></script>
    
    <script>
        if (typeof currentUser === 'undefined') {
            var currentUser = null;
        }
        if (typeof cartItems === 'undefined') {
            var cartItems = [];
        }
        if (typeof shippingAddress === 'undefined') {
            var shippingAddress = null;
        }
        if (typeof currentStep === 'undefined') {
            var currentStep = 1;
        }

        // Verificar autenticación
        auth.onAuthStateChanged(async (user) => {
            if (!user) {
                window.location.href = '/login';
                return;
            }

            currentUser = user;
            await loadUserData();
            await loadCartItems();
        });

        // Cargar datos del usuario para pre-llenar formulario
        async function loadUserData() {
            try {
                if (typeof db === 'undefined') {
                    setTimeout(loadUserData, 500);
                    return;
                }

                // Obtener datos del usuario desde Firestore
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    
                    // Pre-llenar nombre si existe
                    if (userData.fullName) {
                        const fullNameInput = document.getElementById('full-name');
                        if (fullNameInput && !fullNameInput.value) {
                            fullNameInput.value = userData.fullName;
                        }
                    }
                    
                    // Pre-llenar teléfono si existe
                    if (userData.phone) {
                        const phoneInput = document.getElementById('phone');
                        if (phoneInput && !phoneInput.value) {
                            phoneInput.value = userData.phone;
                        }
                    }
                }
            } catch (error) {
                console.error('Error cargando datos del usuario:', error);
                // No es crítico, continuar sin pre-llenar
            }
        }

        // Cargar items del carrito
        async function loadCartItems() {
            try {
                if (typeof db === 'undefined' || typeof getCart === 'undefined') {
                    setTimeout(loadCartItems, 500);
                    return;
                }

                // Usar la función getCart de cart.js que busca en la colección 'carts'
                const items = await getCart(currentUser.uid);
                
                // Convertir al formato esperado
                cartItems = items.map(item => ({
                    productId: item.productId,
                    name: item.name,
                    brand: item.brand || '',
                    price: item.price,
                    quantity: item.quantity,
                    images: item.image ? [item.image] : []
                }));

                if (cartItems.length === 0) {
                    alert('Tu carrito está vacío');
                    window.location.href = '/carrito';
                    return;
                }

                displayOrderItems();
                updateOrderSummary();
            } catch (error) {
                console.error('Error cargando carrito:', error);
                alert('Error al cargar el carrito');
            }
        }

        // Mostrar productos en el resumen
        function displayOrderItems() {
            const container = document.getElementById('order-items');
            
            container.innerHTML = cartItems.map(item => {
                const imageUrl = item.images && item.images.length > 0 
                    ? item.images[0] 
                    : 'https://via.placeholder.com/100x100?text=Sin+Imagen';
                
                return `
                    <div class="flex items-center gap-3">
                        <img 
                            src="${imageUrl}" 
                            alt="${item.name}"
                            class="w-16 h-16 object-cover rounded"
                            onerror="this.src='https://via.placeholder.com/100x100?text=Sin+Imagen'"
                        >
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-900">${item.name}</p>
                            <p class="text-xs text-gray-500">Cantidad: ${item.quantity}</p>
                        </div>
                        <p class="text-sm font-semibold text-gray-900">$${(item.price * item.quantity).toFixed(2)}</p>
                    </div>
                `;
            }).join('');
        }

        // Actualizar resumen
        function updateOrderSummary() {
            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal;

            document.getElementById('order-subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('order-total').textContent = `$${total.toFixed(2)}`;
        }

        // Manejar envío de formulario de dirección
        document.getElementById('address-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            shippingAddress = {
                fullName: document.getElementById('full-name').value,
                phone: document.getElementById('phone').value,
                street: document.getElementById('street').value,
                colonia: document.getElementById('colonia').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                postalCode: document.getElementById('postal-code').value,
                references: document.getElementById('references').value
            };

            // Mostrar dirección en el resumen
            displayDeliveryAddress();
            
            // Cambiar al paso 2
            goToStep(2);
        });

        // Mostrar dirección en el resumen
        function displayDeliveryAddress() {
            const deliveryInfo = document.getElementById('delivery-info');
            const addressText = document.getElementById('delivery-address-text');
            
            addressText.innerHTML = `
                <p class="font-medium">${shippingAddress.fullName}</p>
                <p>${shippingAddress.street}</p>
                <p>${shippingAddress.colonia}, ${shippingAddress.city}, ${shippingAddress.state}</p>
                <p>CP: ${shippingAddress.postalCode}</p>
                <p>Tel: ${shippingAddress.phone}</p>
                ${shippingAddress.references ? `<p class="mt-2 text-xs italic">${shippingAddress.references}</p>` : ''}
            `;
            
            deliveryInfo.classList.remove('hidden');
        }

        // Cambiar de paso
        function goToStep(step) {
            currentStep = step;
            
            if (step === 1) {
                // Mostrar paso 1
                document.getElementById('step-1-content').classList.remove('hidden');
                document.getElementById('step-2-content').classList.add('hidden');
                
                // Actualizar indicadores
                document.getElementById('step-1-indicator').innerHTML = '<i class="fas fa-check"></i>';
                document.getElementById('step-1-indicator').className = 'flex items-center justify-center w-10 h-10 rounded-full bg-gray-900 text-white font-semibold mr-3';
                
                document.getElementById('step-2-indicator').innerHTML = '<span>2</span>';
                document.getElementById('step-2-indicator').className = 'flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-gray-600 font-semibold mr-3';
            } else if (step === 2) {
                // Mostrar paso 2
                document.getElementById('step-1-content').classList.add('hidden');
                document.getElementById('step-2-content').classList.remove('hidden');
                
                // Actualizar indicadores
                document.getElementById('step-1-indicator').innerHTML = '<i class="fas fa-check"></i>';
                document.getElementById('step-1-indicator').className = 'flex items-center justify-center w-10 h-10 rounded-full bg-green-600 text-white font-semibold mr-3';
                
                document.getElementById('step-2-indicator').innerHTML = '<i class="fas fa-check"></i>';
                document.getElementById('step-2-indicator').className = 'flex items-center justify-center w-10 h-10 rounded-full bg-gray-900 text-white font-semibold mr-3';
            }
        }

        // Botón volver
        document.getElementById('back-to-address-btn').addEventListener('click', function() {
            goToStep(1);
        });

        // Manejar cambio de método de pago
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const paymentInfo = document.getElementById('payment-info');
                const method = this.value;
                
                // Ocultar todos
                document.getElementById('cash-info').classList.add('hidden');
                document.getElementById('transfer-info').classList.add('hidden');
                document.getElementById('card-info').classList.add('hidden');
                
                // Mostrar el seleccionado
                if (method === 'cash') {
                    document.getElementById('cash-info').classList.remove('hidden');
                } else if (method === 'transfer') {
                    document.getElementById('transfer-info').classList.remove('hidden');
                } else if (method === 'card') {
                    document.getElementById('card-info').classList.remove('hidden');
                }
                
                paymentInfo.classList.remove('hidden');
                
                // Actualizar estilo de los métodos
                document.querySelectorAll('.payment-method').forEach(label => {
                    label.classList.remove('border-gray-900', 'bg-gray-50');
                    label.classList.add('border-gray-300');
                });
                
                this.closest('.payment-method').classList.remove('border-gray-300');
                this.closest('.payment-method').classList.add('border-gray-900', 'bg-gray-50');
            });
        });

        // Inicializar método de pago por defecto
        document.querySelector('input[name="paymentMethod"][value="cash"]').dispatchEvent(new Event('change'));

        // Manejar envío de formulario de pago
        document.getElementById('payment-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!shippingAddress) {
                alert('Por favor, completa la dirección de envío');
                goToStep(1);
                return;
            }

            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const button = document.getElementById('complete-order-btn');
            const originalText = button.innerHTML;
            
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Procesando...';

            try {
                // Crear la orden
                const orderData = {
                    userId: currentUser.uid,
                    items: cartItems.map(item => ({
                        productId: item.productId,
                        name: item.name,
                        brand: item.brand,
                        price: item.price,
                        quantity: item.quantity,
                        images: item.images
                    })),
                    shippingAddress: shippingAddress,
                    paymentMethod: paymentMethod,
                    subtotal: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                    shipping: 0,
                    total: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                    status: 'pending',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                // Guardar orden en Firestore
                const orderRef = await db.collection('orders').add(orderData);

                // Limpiar carrito usando la función clearCart de cart.js
                if (typeof clearCart !== 'undefined') {
                    await clearCart(currentUser.uid);
                } else {
                    // Fallback: limpiar manualmente
                    const cartRef = db.collection('carts').doc(currentUser.uid);
                    await cartRef.set({
                        items: [],
                        updatedAt: new Date().toISOString()
                    }, { merge: true });
                }

                // Redirigir a página de confirmación
                window.location.href = `/orden-confirmada?orderId=${orderRef.id}`;
                
            } catch (error) {
                console.error('Error completando pedido:', error);
                alert('Error al procesar el pedido. Por favor, intenta de nuevo.');
                button.disabled = false;
                button.innerHTML = originalText;
            }
        });
    </script>
    {% include 'partials/footer.html' %}
</body>
</html>

